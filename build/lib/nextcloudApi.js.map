{
  "version": 3,
  "sources": ["../../src/lib/nextcloudApi.ts"],
  "sourcesContent": ["import axios from 'axios';\n\n/**\n * Client f\u00FCr die Nextcloud OCS API Kommunikation.\n */\nexport class NextcloudApiClient {\n\t/**\n\t * @param domain Die URL der Nextcloud Instanz.\n\t * @param token Das App-Passwort (NC-Token).\n\t * @param skipApps Ob Apps \u00FCbersprungen werden sollen.\n\t * @param skipUpdate Ob Updates \u00FCbersprungen werden sollen.\n\t */\n\tconstructor(\n\t\tprivate domain: string,\n\t\tprivate token: string,\n\t\tprivate skipApps: boolean,\n\t\tprivate skipUpdate: boolean,\n\t) {}\n\n\t/**\n\t * Formatiert Rohwerte in MB oder GB.\n\t *\n\t * @param value Der Wert, der gespeichert werden soll\n\t * @param isKilobytes ob es Kilobytes sind\n\t */\n\tpublic formatValue(value: any, isKilobytes = false): string {\n\t\tconst numericValue = typeof value === 'string' ? parseFloat(value) : value;\n\t\tif (isNaN(numericValue) || numericValue <= 0) {\n\t\t\treturn '0 MB';\n\t\t}\n\t\tconst bytes = isKilobytes ? numericValue * 1024 : numericValue;\n\t\tconst mb = bytes / (1024 * 1024);\n\t\treturn mb >= 1024 ? `${(mb / 1024).toFixed(2)} GB` : `${mb.toFixed(2)} MB`;\n\t}\n\n\t/**\n\t * Holt die Monitoring-Daten von der API.\n\t */\n\tpublic async fetchData(): Promise<any> {\n\t\tconst cleanDomain = this.domain.replace(/^https?:\\/\\//, '').replace(/\\/$/, '');\n\t\tconst url = `https://${cleanDomain}/ocs/v2.php/apps/serverinfo/api/v1/info?format=json&skipApps=${this.skipApps}&skipUpdate=${this.skipUpdate}`;\n\n\t\tconst response = await axios.get(url, {\n\t\t\theaders: {\n\t\t\t\t'OCS-APIRequest': 'true',\n\t\t\t\t'NC-Token': this.token,\n\t\t\t\tAccept: 'application/json',\n\t\t\t},\n\t\t\ttimeout: 10000,\n\t\t});\n\n\t\treturn response.data;\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkB;AAKX,MAAM,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAO/B,YACS,QACA,OACA,UACA,YACP;AAJO;AACA;AACA;AACA;AAAA,EACN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQI,YAAY,OAAY,cAAc,OAAe;AAC3D,UAAM,eAAe,OAAO,UAAU,WAAW,WAAW,KAAK,IAAI;AACrE,QAAI,MAAM,YAAY,KAAK,gBAAgB,GAAG;AAC7C,aAAO;AAAA,IACR;AACA,UAAM,QAAQ,cAAc,eAAe,OAAO;AAClD,UAAM,KAAK,SAAS,OAAO;AAC3B,WAAO,MAAM,OAAO,IAAI,KAAK,MAAM,QAAQ,CAAC,CAAC,QAAQ,GAAG,GAAG,QAAQ,CAAC,CAAC;AAAA,EACtE;AAAA;AAAA;AAAA;AAAA,EAKA,MAAa,YAA0B;AACtC,UAAM,cAAc,KAAK,OAAO,QAAQ,gBAAgB,EAAE,EAAE,QAAQ,OAAO,EAAE;AAC7E,UAAM,MAAM,WAAW,WAAW,gEAAgE,KAAK,QAAQ,eAAe,KAAK,UAAU;AAE7I,UAAM,WAAW,MAAM,aAAAA,QAAM,IAAI,KAAK;AAAA,MACrC,SAAS;AAAA,QACR,kBAAkB;AAAA,QAClB,YAAY,KAAK;AAAA,QACjB,QAAQ;AAAA,MACT;AAAA,MACA,SAAS;AAAA,IACV,CAAC;AAED,WAAO,SAAS;AAAA,EACjB;AACD;",
  "names": ["axios"]
}
