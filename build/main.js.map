{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["import * as utils from '@iobroker/adapter-core';\nimport { NextcloudApiClient } from './lib/nextcloudApi';\nimport { words } from './lib/words';\n\n/**\n * Interface f\u00FCr die Definition eines einzelnen Servers aus der Admin-Tabelle.\n */\ninterface NextcloudServer {\n\tname: string;\n\tdomain: string;\n\ttoken: string;\n}\n\n/**\n * Interface f\u00FCr die Adapter-Konfiguration.\n */\ninterface AdapterConfig extends ioBroker.AdapterConfig {\n\tservers: NextcloudServer[];\n\tskipApps: boolean;\n\tskipUpdate: boolean;\n\tinterval: number;\n}\n\nclass NextcloudMonitoring extends utils.Adapter {\n\tprivate updateInterval: ioBroker.Interval | undefined;\n\n\tpublic constructor(options: Partial<utils.AdapterOptions> = {}) {\n\t\tsuper({ ...options, name: 'nextcloud-monitoring' });\n\t\tthis.on('ready', this.onReady.bind(this));\n\t\tthis.on('unload', this.onUnload.bind(this));\n\t}\n\n\t/**\n\t * Initialisiert den Adapter und startet die Abfragen f\u00FCr alle konfigurierten Server.\n\t */\n\tprivate async onReady(): Promise<void> {\n\t\tconst config = this.config as AdapterConfig;\n\n\t\tif (!config.servers || !Array.isArray(config.servers) || config.servers.length === 0) {\n\t\t\tthis.log.error('Konfiguration unvollst\u00E4ndig: Keine Server in der Tabelle gefunden!');\n\t\t\treturn;\n\t\t}\n\n\t\t// Erstmaliger Aufruf beim Start\n\t\tawait this.updateAllServers();\n\n\t\t// Intervall einrichten (Standard 10 Min, falls nicht gesetzt)\n\t\tconst minutes = config.interval || 10;\n\t\tconst intervalMs = minutes * 60 * 1000;\n\n\t\tthis.updateInterval = this.setInterval(async () => {\n\t\t\tawait this.updateAllServers();\n\t\t}, intervalMs);\n\t}\n\n\t/**\n\t * Iteriert \u00FCber alle Server in der Liste und f\u00FChrt die API-Abfrage aus.\n\t */\n\tprivate async updateAllServers(): Promise<void> {\n\t\tconst config = this.config as AdapterConfig;\n\n\t\tfor (const server of config.servers) {\n\t\t\tif (!server.domain || !server.token) {\n\t\t\t\tthis.log.warn(`Server \"${server.name || 'Unbekannt'}\" \u00FCbersprungen: Domain oder Token fehlt.`);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Erzeuge eine saubere ID f\u00FCr den ioBroker Objektbaum\n\t\t\t// Ersetzt Punkte und Leerzeichen durch Unterstriche\n\t\t\tconst cleanId = (server.name || server.domain).replace(this.FORBIDDEN_CHARS, '_').replace(/\\s|\\./g, '_');\n\n\t\t\tthis.log.info(`Abfrage l\u00E4uft f\u00FCr: ${server.name} (${server.domain})`);\n\n\t\t\tconst apiClient = new NextcloudApiClient(\n\t\t\t\tserver.domain,\n\t\t\t\tserver.token.trim(),\n\t\t\t\tconfig.skipApps,\n\t\t\t\tconfig.skipUpdate,\n\t\t\t);\n\n\t\t\tawait this.updateNextcloudData(cleanId, apiClient);\n\t\t}\n\t}\n\n\t/**\n\t * Hauptfunktion zum Abrufen und Verarbeiten aller Datenpunkte eines spezifischen Servers.\n\t *\n\t * @param serverId serverId The unique ID of the server used as the root folder in the object tree.\n\t * @param apiClient apiClient The instance of the NextcloudApiClient used to communicate with this specific server.\n\t */\n\tprivate async updateNextcloudData(serverId: string, apiClient: NextcloudApiClient): Promise<void> {\n\t\ttry {\n\t\t\tconst response = await apiClient.fetchData();\n\n\t\t\tif (!response?.ocs?.data) {\n\t\t\t\tthis.log.warn(`Unerwartete API-Antwort von Nextcloud (${serverId})`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst data = response.ocs.data;\n\t\t\tconst nc = data.nextcloud;\n\n\t\t\t// --- 1. SYSTEM & HARDWARE ---\n\t\t\tif (nc?.system) {\n\t\t\t\tconst sys = nc.system;\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.system.current_version`,\n\t\t\t\t\t'Current Version',\n\t\t\t\t\tsys.version,\n\t\t\t\t\t'string',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(`${serverId}.system.cpuload_1`, 'CPU Load 1min', sys.cpuload[0], 'number');\n\t\t\t\tawait this.setAndCreateState(`${serverId}.system.cpuload_5`, 'CPU Load 5min', sys.cpuload[1], 'number');\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.system.cpuload_15`,\n\t\t\t\t\t'CPU Load 15min',\n\t\t\t\t\tsys.cpuload[2],\n\t\t\t\t\t'number',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(`${serverId}.system.cpunum`, 'CPU Cores', sys.cpunum, 'number');\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.system.mem_total`,\n\t\t\t\t\t'RAM Total',\n\t\t\t\t\tapiClient.formatValue(sys.mem_total, true),\n\t\t\t\t\t'string',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.system.mem_free`,\n\t\t\t\t\t'RAM Free',\n\t\t\t\t\tapiClient.formatValue(sys.mem_free, true),\n\t\t\t\t\t'string',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.system.swap_total`,\n\t\t\t\t\t'Swap Total',\n\t\t\t\t\tapiClient.formatValue(sys.swap_total, true),\n\t\t\t\t\t'string',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.system.freespace`,\n\t\t\t\t\t'Free Disk Space',\n\t\t\t\t\tapiClient.formatValue(sys.freespace),\n\t\t\t\t\t'string',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.system.memcache_local`,\n\t\t\t\t\t'Memcache Local',\n\t\t\t\t\tsys['memcache.local'],\n\t\t\t\t\t'string',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.system.memcache_locking`,\n\t\t\t\t\t'Memcache Locking',\n\t\t\t\t\tsys['memcache.locking'],\n\t\t\t\t\t'string',\n\t\t\t\t);\n\n\t\t\t\tif (sys.apps) {\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.apps.num_installed`,\n\t\t\t\t\t\t'Installed Apps',\n\t\t\t\t\t\tsys.apps.num_installed,\n\t\t\t\t\t\t'number',\n\t\t\t\t\t);\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.apps.updates_available`,\n\t\t\t\t\t\t'App Updates available',\n\t\t\t\t\t\tsys.apps.num_updates_available,\n\t\t\t\t\t\t'number',\n\t\t\t\t\t);\n\n\t\t\t\t\tif (sys.apps.app_updates && typeof sys.apps.app_updates === 'object') {\n\t\t\t\t\t\tconst updateList = Object.entries(sys.apps.app_updates as Record<string, any>)\n\t\t\t\t\t\t\t.map(([appName, version]) => `${String(appName)} = \"${String(version)}\"`)\n\t\t\t\t\t\t\t.join(' & ');\n\n\t\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t\t`${serverId}.apps.new_updates_for_apps`,\n\t\t\t\t\t\t\t'New Updates for apps',\n\t\t\t\t\t\t\tupdateList || 'none',\n\t\t\t\t\t\t\t'string',\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (sys.update) {\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.apps.update_available`,\n\t\t\t\t\t\t'System Update available',\n\t\t\t\t\t\tsys.update.available,\n\t\t\t\t\t\t'boolean',\n\t\t\t\t\t);\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.apps.last_update_check`,\n\t\t\t\t\t\t'Last Update Check',\n\t\t\t\t\t\tnew Date(sys.update.lastupdatedat * 1000).toLocaleString(),\n\t\t\t\t\t\t'string',\n\t\t\t\t\t);\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.apps.available_new_version`,\n\t\t\t\t\t\t'Available New Version',\n\t\t\t\t\t\tsys.update.available_version,\n\t\t\t\t\t\t'string',\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// --- 2. STORAGE & USERS ---\n\t\t\tif (nc?.storage) {\n\t\t\t\tconst st = nc.storage;\n\t\t\t\tawait this.setAndCreateState(`${serverId}.storage.num_users`, 'Total Users', st.num_users, 'number');\n\t\t\t\tawait this.setAndCreateState(`${serverId}.storage.num_files`, 'Total Files', st.num_files, 'number');\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.storage.num_storages`,\n\t\t\t\t\t'Total Storages',\n\t\t\t\t\tst.num_storages,\n\t\t\t\t\t'number',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.storage.num_files_appdata`,\n\t\t\t\t\t'Appdata Files',\n\t\t\t\t\tst.num_files_appdata,\n\t\t\t\t\t'number',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.storage.num_disabled_users`,\n\t\t\t\t\t'Num Disabled Users',\n\t\t\t\t\tst.num_disabled_users,\n\t\t\t\t\t'number',\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// --- 3. SHARES (FREIGABEN) ---\n\t\t\tif (nc?.shares) {\n\t\t\t\tconst sh = nc.shares;\n\t\t\t\tawait this.setAndCreateState(`${serverId}.shares.num_shares`, 'Total Shares', sh.num_shares, 'number');\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.shares.num_shares_link`,\n\t\t\t\t\t'Link Shares',\n\t\t\t\t\tsh.num_shares_link,\n\t\t\t\t\t'number',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.shares.num_shares_room`,\n\t\t\t\t\t'Talk Rooms',\n\t\t\t\t\tsh.num_shares_room,\n\t\t\t\t\t'number',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.shares.num_fed_shares_sent`,\n\t\t\t\t\t'Federated Sent',\n\t\t\t\t\tsh.num_fed_shares_sent,\n\t\t\t\t\t'number',\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// --- 4. SERVER, PHP, OPCACHE, APCU & FPM & DATABASE ---\n\t\t\tif (data.server) {\n\t\t\t\tconst srv = data.server;\n\t\t\t\tawait this.setAndCreateState(`${serverId}.server.webserver`, 'Webserver Type', srv.webserver, 'string');\n\n\t\t\t\tif (srv.php) {\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.server.php.version`,\n\t\t\t\t\t\t'PHP Version',\n\t\t\t\t\t\tsrv.php.version,\n\t\t\t\t\t\t'string',\n\t\t\t\t\t);\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.server.php.memory_limit`,\n\t\t\t\t\t\t'PHP Memory Limit',\n\t\t\t\t\t\tapiClient.formatValue(srv.php.memory_limit),\n\t\t\t\t\t\t'string',\n\t\t\t\t\t);\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.server.php.upload_max`,\n\t\t\t\t\t\t'Max Upload Size',\n\t\t\t\t\t\tapiClient.formatValue(srv.php.upload_max_filesize),\n\t\t\t\t\t\t'string',\n\t\t\t\t\t);\n\n\t\t\t\t\tconst opcache = srv.php.opcache || srv.opcache;\n\t\t\t\t\tif (opcache) {\n\t\t\t\t\t\tconst stats = opcache.opcache_statistics;\n\t\t\t\t\t\tconst mem = opcache.memory_usage;\n\t\t\t\t\t\tif (stats) {\n\t\t\t\t\t\t\tconst hitRate = stats.opcache_hit_rate\n\t\t\t\t\t\t\t\t? `${parseFloat(stats.opcache_hit_rate).toFixed(2)}%`\n\t\t\t\t\t\t\t\t: '0%';\n\t\t\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t\t\t`${serverId}.server.php.opcache.hit_rate`,\n\t\t\t\t\t\t\t\t'Opcache Hit Rate',\n\t\t\t\t\t\t\t\thitRate,\n\t\t\t\t\t\t\t\t'string',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (mem) {\n\t\t\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t\t\t`${serverId}.server.php.opcache.used_mem`,\n\t\t\t\t\t\t\t\t'Opcache RAM used',\n\t\t\t\t\t\t\t\tapiClient.formatValue(mem.used_memory || 0),\n\t\t\t\t\t\t\t\t'string',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst apcu = srv.php.apcu || srv.apcu;\n\t\t\t\t\tif (apcu?.cache) {\n\t\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t\t`${serverId}.server.php.apcu.entries`,\n\t\t\t\t\t\t\t'APCu Entries',\n\t\t\t\t\t\t\tapcu.cache.num_entries,\n\t\t\t\t\t\t\t'number',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t\t`${serverId}.server.php.apcu.mem_size`,\n\t\t\t\t\t\t\t'APCu Cache Size',\n\t\t\t\t\t\t\tapiClient.formatValue(apcu.cache.mem_size),\n\t\t\t\t\t\t\t'string',\n\t\t\t\t\t\t);\n\t\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t\t`${serverId}.server.php.apcu.hits`,\n\t\t\t\t\t\t\t'APCu Hits',\n\t\t\t\t\t\t\tapcu.cache.num_hits,\n\t\t\t\t\t\t\t'number',\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (srv.fpm) {\n\t\t\t\t\tconst fpm = srv.fpm;\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.server.fpm.active_processes`,\n\t\t\t\t\t\t'FPM Active Processes',\n\t\t\t\t\t\tfpm['active-processes'],\n\t\t\t\t\t\t'number',\n\t\t\t\t\t);\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.server.fpm.total_processes`,\n\t\t\t\t\t\t'FPM Total Processes',\n\t\t\t\t\t\tfpm['total-processes'],\n\t\t\t\t\t\t'number',\n\t\t\t\t\t);\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.server.fpm.idle_processes`,\n\t\t\t\t\t\t'FPM Idle Processes',\n\t\t\t\t\t\tfpm['idle-processes'],\n\t\t\t\t\t\t'number',\n\t\t\t\t\t);\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.server.fpm.accepted_conn`,\n\t\t\t\t\t\t'FPM Accepted Conn',\n\t\t\t\t\t\tfpm['accepted-conn'],\n\t\t\t\t\t\t'number',\n\t\t\t\t\t);\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.server.fpm.max_active`,\n\t\t\t\t\t\t'FPM Max Active',\n\t\t\t\t\t\tfpm['max-active-processes'],\n\t\t\t\t\t\t'number',\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (srv.database) {\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.server.database.type`,\n\t\t\t\t\t\t'DB Type',\n\t\t\t\t\t\tsrv.database.type,\n\t\t\t\t\t\t'string',\n\t\t\t\t\t);\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.server.database.version`,\n\t\t\t\t\t\t'DB Version',\n\t\t\t\t\t\tsrv.database.version,\n\t\t\t\t\t\t'string',\n\t\t\t\t\t);\n\t\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t\t`${serverId}.server.database.size`,\n\t\t\t\t\t\t'DB Size',\n\t\t\t\t\t\tapiClient.formatValue(srv.database.size),\n\t\t\t\t\t\t'string',\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// --- 5. AKTIVE NUTZER ---\n\t\t\tif (data.activeUsers) {\n\t\t\t\tconst au = data.activeUsers;\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.activeUsers.last5min`,\n\t\t\t\t\t'Active Users (5 min)',\n\t\t\t\t\tau.last5minutes,\n\t\t\t\t\t'number',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.activeUsers.last1h`,\n\t\t\t\t\t'Active Users (1 h)',\n\t\t\t\t\tau.last1hour,\n\t\t\t\t\t'number',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.activeUsers.last24h`,\n\t\t\t\t\t'Active Users (24 h)',\n\t\t\t\t\tau.last24hours,\n\t\t\t\t\t'number',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.activeUsers.last1month`,\n\t\t\t\t\t'Active Users (1 month)',\n\t\t\t\t\tau.last1month,\n\t\t\t\t\t'number',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.activeUsers.last3month`,\n\t\t\t\t\t'Active Users (3 month)',\n\t\t\t\t\tau.last3months,\n\t\t\t\t\t'number',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.activeUsers.last6month`,\n\t\t\t\t\t'Active Users (6 month)',\n\t\t\t\t\tau.last6months,\n\t\t\t\t\t'number',\n\t\t\t\t);\n\t\t\t\tawait this.setAndCreateState(\n\t\t\t\t\t`${serverId}.activeUsers.lastyear`,\n\t\t\t\t\t'Active Users (Last Year)',\n\t\t\t\t\tau.lastyear,\n\t\t\t\t\t'number',\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.log.debug(`Monitoring (${serverId}): Alle Daten erfolgreich aktualisiert.`);\n\t\t} catch (error: any) {\n\t\t\tif (error.response && error.response.status === 503) {\n\t\t\t\tthis.log.info(`Nextcloud (${serverId}) befindet sich im Wartungsmodus (Maintenance).`);\n\t\t\t} else {\n\t\t\t\tthis.log.error(`Fehler bei Server \"${serverId}\": ${error.message}`);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Erstellt ein Objekt, falls es nicht existiert, und setzt den Wert.\n\t * Nutzt die \u00DCbersetzungstabelle f\u00FCr die Namen.\n\t *\n\t * @param id The ID of the state to be created (e.g., 'system.version').\n\t * @param nameKey The key for the translation in words.ts or the display name.\n\t * @param value The value to be stored (can be string, number, boolean, etc.).\n\t * @param type The ioBroker data type (e.g., 'string', 'number', 'boolean', 'array', 'object', 'mixed').\n\t */\n\tprivate async setAndCreateState(id: string, nameKey: string, value: any, type: ioBroker.CommonType): Promise<void> {\n\t\tconst translatedName = words[nameKey] || nameKey;\n\n\t\tawait this.setObjectNotExistsAsync(id, {\n\t\t\ttype: 'state',\n\t\t\tcommon: {\n\t\t\t\tname: translatedName,\n\t\t\t\ttype,\n\t\t\t\trole: 'value',\n\t\t\t\tread: true,\n\t\t\t\twrite: false,\n\t\t\t},\n\t\t\tnative: {},\n\t\t});\n\t\tawait this.setState(id, { val: value, ack: true });\n\t}\n\n\t/**\n\t * Wird beim Stoppen des Adapters aufgerufen.\n\t *\n\t * @param callback A function that must be called once the unloading process is finished.\n\t */\n\tprivate onUnload(callback: () => void): void {\n\t\ttry {\n\t\t\tif (this.updateInterval) {\n\t\t\t\tthis.clearInterval(this.updateInterval);\n\t\t\t}\n\t\t\tcallback();\n\t\t} catch {\n\t\t\tcallback();\n\t\t}\n\t}\n}\n\nif (require.main !== module) {\n\tmodule.exports = (options: Partial<utils.AdapterOptions> | undefined) => new NextcloudMonitoring(options);\n} else {\n\t(() => new NextcloudMonitoring())();\n}\n"],
  "mappings": "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",
  "names": []
}
